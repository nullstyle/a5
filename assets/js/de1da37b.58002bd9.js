"use strict";(self.webpackChunkproject_website=self.webpackChunkproject_website||[]).push([[6478],{2342:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>R,contentTitle:()=>L,default:()=>T,frontMatter:()=>P,metadata:()=>i,toc:()=>B});const i=JSON.parse('{"id":"lattice","title":"Lattice","description":"","source":"@site/src/examples/lattice.mdx","sourceDirName":".","slug":"/lattice","permalink":"/examples/lattice","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"examplesSidebar","previous":{"title":"Teohedron & Dodecahedron","permalink":"/examples/teohedron-dodecahedron"},"next":{"title":"Hilbert Curve","permalink":"/examples/hilbert"}}');var r=n(4848),s=n(8453),o=n(6540),a=n(4258),l=(n(5338),n(2478)),c=n(5890),h=n(2114),d=n(1457),u=n(3537),p=n(1309),g=n(435),x=n(3522),f=n(842),v=n(2964),b=n(3255),w=n(1997);const m=x.fA(-1,0,0,-1),j=x.fA(1,0,0,-1),y=(e,t)=>{const n=e.map((e=>f.vt()));if(6===t.length)for(let i=0;i<e.length;i++)f.l0(n[i],e[i],t);else for(let i=0;i<e.length;i++)f.ZF(n[i],e[i],t);return n},k=()=>{const[e,t]=(0,o.useState)(2),[n,i]=(0,o.useState)(!0),[s,a]=(0,o.useState)({triangles:!0,path:!0,points:!1,labels:!1,anchors:!1}),[x,k]=(0,o.useState)("uv"),[C,A]=(0,o.useState)(!1),[S,M]=(0,o.useState)(100),P=(0,o.useMemo)((()=>n?w.tK.getVertices():w.LF.getVertices()),[n]),L=(0,o.useMemo)((()=>{const e=v.kN(v.vt(),w.LF.getVertices()[2]);return{M_translateLeft:v.B8(v.vt(),e),M_translateRight:e}}),[]),R=(0,o.useCallback)((e=>{const t=Array.from({length:Math.pow(4,e)},((e,t)=>t)),n=Math.pow(2,-e);return t.map((t=>(0,b.ky)(t,e,x))).map(((e,t)=>function(e,t,n,i,r,s,o){const a=f.ZF(f.vt(),e.offset,r);let l=i;e.flips[0]===b.NO&&e.flips[1]===b._Y&&(l=y(l,m));const c=e.k,h=e.flips[0]+e.flips[1];((-2===h||2===h)&&c>1||0===h&&(0===c||3===c))&&(l=y(l,j));e.flips[0]===b._Y&&e.flips[1]===b._Y?l=y(l,m):e.flips[0]===b._Y?l=y(l,s):e.flips[1]===b._Y&&(l=y(l,o));const d=l.map((e=>{const n=f.WQ([0,0],a,e);return f.hs(n,n,t),n})),u=d.reduce(((e,t)=>f.WQ(e,e,t)),[0,0]);return f.hs(u,u,1/d.length),{origin:f.hs(f.vt(),a,t),anchor:e,vertices:d,center:u,index:n}}(e,n,t,P,w.P9,L.M_translateLeft,L.M_translateRight)))}),[P,w.P9,L,x]),B=(0,o.useCallback)((e=>e.slice(0,-1).map(((t,n)=>({path:[t.center,e[n+1].center],index:t.index})))),[]),[F,T]=(0,o.useState)((()=>R(e))),[_,I]=(0,o.useState)((()=>B(F)));(0,o.useEffect)((()=>{const t=R(e);T(t),I(B(t))}),[e,R,B]);const N=(0,o.useCallback)((e=>{t(e)}),[]),Q=(0,o.useMemo)((()=>_.length/100),[_.length]),V=(0,o.useMemo)((()=>{const e=_.length;return[0,Math.floor(e*(S/100))]}),[_.length,S]);const W=e=>{let{resolution:t,onResolutionChange:n,layerVisibility:i,setLayerVisibility:s,usePentagon:o,setUsePentagon:a,orientation:l,setOrientation:c,quaternaryColor:h,setQuaternaryColor:d}=e;return(0,r.jsxs)("div",{style:{position:"absolute",top:"20px",left:"20px",background:"white",padding:"10px",borderRadius:"4px",boxShadow:"0 2px 4px rgba(0,0,0,0.2)",zIndex:1},children:[(0,r.jsx)("div",{style:{marginBottom:"10px"},children:(0,r.jsxs)("label",{children:["Orientation: "," ",(0,r.jsxs)("select",{value:l,onChange:e=>c(e.target.value),style:{marginLeft:"5px"},children:[(0,r.jsx)("option",{value:"uv",children:"uv"}),(0,r.jsx)("option",{value:"vu",children:"vu"}),(0,r.jsx)("option",{value:"uw",children:"uw"}),(0,r.jsx)("option",{value:"wu",children:"wu"}),(0,r.jsx)("option",{value:"vw",children:"vw"}),(0,r.jsx)("option",{value:"wv",children:"wv"})]})]})}),(0,r.jsx)("div",{style:{marginBottom:"10px"},children:(0,r.jsxs)("label",{children:[(0,r.jsx)("input",{type:"checkbox",checked:o,onChange:e=>a(e.target.checked)})," Use Pentagon"]})}),(0,r.jsx)("div",{style:{marginBottom:"10px"},children:(0,r.jsxs)("label",{children:[(0,r.jsx)("input",{type:"checkbox",checked:h,onChange:e=>d(e.target.checked)})," Quaternary Color"]})}),(0,r.jsx)("div",{style:{marginBottom:"10px",borderTop:"1px solid #ccc",paddingTop:"10px"},children:(0,r.jsxs)("label",{children:["Resolution: ",t,(0,r.jsx)("input",{type:"range",min:"1",max:"8",value:t,onChange:e=>n(Number(e.target.value)),style:{marginLeft:"10px"}})]})}),(0,r.jsxs)("div",{style:{display:"flex",flexDirection:"column",gap:"5px",borderTop:"1px solid #ccc",paddingTop:"10px"},children:[(0,r.jsxs)("label",{children:[(0,r.jsx)("input",{type:"checkbox",checked:i.triangles,onChange:e=>s({...i,triangles:e.target.checked})})," Show ",o?"Pentagon":"Triangle","s"]}),(0,r.jsxs)("label",{children:[(0,r.jsx)("input",{type:"checkbox",checked:i.path,onChange:e=>s({...i,path:e.target.checked})})," Show Path"]}),(0,r.jsxs)("label",{children:[(0,r.jsx)("input",{type:"checkbox",checked:i.points,onChange:e=>s({...i,points:e.target.checked})})," Show Points"]}),(0,r.jsxs)("label",{children:[(0,r.jsx)("input",{type:"checkbox",checked:i.labels,onChange:e=>s({...i,labels:e.target.checked})})," Show Labels"]}),(0,r.jsxs)("label",{children:[(0,r.jsx)("input",{type:"checkbox",checked:i.anchors,onChange:e=>s({...i,anchors:e.target.checked})})," Show Anchors"]})]})]})},z=e=>{let{value:t,onChange:n}=e;return(0,r.jsxs)("div",{style:{position:"absolute",bottom:"20px",left:"50%",transform:"translateX(-50%)",background:"white",padding:"10px",borderRadius:"4px",boxShadow:"0 2px 4px rgba(0,0,0,0.2)",zIndex:1,width:"300px",textAlign:"center"},children:[(0,r.jsxs)("div",{style:{marginBottom:"5px"},children:["Show ",t,"% of Path"]}),(0,r.jsx)("input",{type:"range",min:"1",max:"100",value:t,onChange:e=>n(Number(e.target.value)),style:{width:"100%"}})]})};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(l.A,{initialViewState:{latitude:0,longitude:.4,zoom:9},controller:!0,layers:((e,t,n,i,r)=>{const o={extensions:[new p.A({filterSize:1})],getFilterValue:e=>e.index,filterSoftRange:e,filterRange:e.map(((e,t)=>0===t?e-r:e+r))},a={lineWidthMinPixels:1,stroked:!0},l=(0,g.A)({attr:e=>e.index,colors:"Geyser",domain:Array.from({length:10}).map(((e,n)=>n*t/10))});return[new c.A({id:"triangles",data:n,getPolygon:e=>e.vertices,getFillColor:e=>{if(!C)return[100,100,100,200];const{k:t}=e.anchor;return 0===t?[255,99,71,200]:1===t?[50,205,50,200]:2===t?[147,112,219,200]:[255,215,0,200]},updateTriggers:{getFillColor:[C]},getLineColor:[135,206,235,100],filled:!0,visible:s.triangles,...a,...o}),new h.A({id:"path",data:i,getPath:e=>e.path,getColor:l,getWidth:4,widthUnits:"pixels",capRounded:!0,visible:s.path,...o}),new d.A({id:"labels",data:n,getPosition:e=>f.Cc(f.vt(),e.origin,e.center,.2),getText:e=>{const[t,n]=e.anchor.offset;return`[${t},${n}]`},getSize:16,getColor:[255,255,255,255],getTextAnchor:"middle",getAlignmentBaseline:"center",visible:s.labels,...o}),new u.A({id:"points",data:n,getPosition:e=>e.center,getFillColor:l,getRadius:8,radiusUnits:"pixels",getLineColor:[255,255,255],visible:s.points,...a,...o}),new u.A({id:"anchors",data:n,getPosition:e=>e.origin,getFillColor:[0,0,0],getLineColor:[255,255,255],getRadius:e=>[1,6,9,14,18,21,26,29].includes(e.index%32)?10:5,radiusUnits:"pixels",stroked:!0,lineWidthMinPixels:1,visible:s.anchors,...o})]})(V,_.length,F,_,Q)}),(0,r.jsx)(W,{resolution:e,onResolutionChange:N,layerVisibility:s,setLayerVisibility:a,usePentagon:n,setUsePentagon:i,orientation:x,setOrientation:k,quaternaryColor:C,setQuaternaryColor:A}),(0,r.jsx)(z,{value:S,onChange:M})]})},C=k;var A=n(999);class S extends o.Component{static title="A5 Lattice Explorer";static code=(()=>`${a.l}/examples/website/lattice`)();static parameters={};static renderInfo(e){return(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{children:"Shows the relationship between the triangles in the A5 lattice and the pentagon tiling and how they are indexed by the Hilbert curve."}),(0,r.jsx)("p",{children:"The Hilbert curve is a space-filling curve that maps a one-dimensional line to a two-dimensional plane."}),(0,r.jsx)("p",{children:"The order in which the curve visits the cells is related to order of the integer cell ids."})]})}render(){return(0,r.jsx)("div",{style:{width:"100%",height:"100%",position:"absolute",background:"#111"},children:(0,r.jsx)(C,{...this.props})})}}const M=(0,A.xv)(S),P={},L="Lattice",R={},B=[];function F(e){const t={h1:"h1",header:"header",...(0,s.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(t.header,{children:(0,r.jsx)(t.h1,{id:"lattice",children:"Lattice"})}),"\n","\n",(0,r.jsx)(M,{})]})}function T(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(F,{...e})}):F(e)}},2964:(e,t,n)=>{n.d(t,{$0:()=>a,B8:()=>s,kN:()=>l,lw:()=>o,vt:()=>r});var i=n(7823);function r(){var e=new i.tb(6);return i.tb!=Float32Array&&(e[1]=0,e[2]=0,e[4]=0,e[5]=0),e[0]=1,e[3]=1,e}function s(e,t){var n=t[0],i=t[1],r=t[2],s=t[3],o=t[4],a=t[5],l=n*s-i*r;return l?(l=1/l,e[0]=s*l,e[1]=-i*l,e[2]=-r*l,e[3]=n*l,e[4]=(r*a-s*o)*l,e[5]=(i*o-n*a)*l,e):null}function o(e,t,n){var i=t[0],r=t[1],s=t[2],o=t[3],a=t[4],l=t[5],c=n[0],h=n[1],d=n[2],u=n[3],p=n[4],g=n[5];return e[0]=i*c+s*h,e[1]=r*c+o*h,e[2]=i*d+s*u,e[3]=r*d+o*u,e[4]=i*p+s*g+a,e[5]=r*p+o*g+l,e}function a(e,t){var n=Math.sin(t),i=Math.cos(t);return e[0]=i,e[1]=n,e[2]=-n,e[3]=i,e[4]=0,e[5]=0,e}function l(e,t){return e[0]=1,e[1]=0,e[2]=0,e[3]=1,e[4]=t[0],e[5]=t[1],e}},3255:(e,t,n)=>{n.d(t,{NO:()=>o,_Y:()=>s,eS:()=>w,ky:()=>f});var i=n(7823),r=n(842);i.fG(Float64Array);const s=-1,o=1,a=e=>{let[t,n]=e;return r.fA(t-n,n)},l=r.fA(1,0),c=r.fA(0,1),h=r.ze(r.vt(),l),d=r.ze(r.vt(),c),u=r.fA(0,0),p=(e,t)=>{let[n,i]=t,a=u,p=u;switch(n===o&&i===o?(a=l,p=c):n===s&&i===o?(a=d,p=h):n===o&&i===s?(a=c,p=l):n===s&&i===s&&(a=h,p=d),e){case 0:return u;case 1:return a;case 2:return r.WQ(r.vt(),p,a);case 3:return r.Ln(r.vt(),p,a,2);default:throw new Error(`Invalid Quaternary value: ${e}`)}},g=e=>[[o,o],[o,s],[o,o],[s,o]][e],x=r.fA(-1,1),f=(e,t,n)=>{let i=BigInt(e);const o="wv"===n||"vw"===n,a="wu"===n||"uw"===n;("vu"===n||"wu"===n||"vw"===n)&&(i=(1n<<BigInt(2*t))-i-1n);const l=v(i);if(a){const{offset:[e,t],flips:[n,i]}=l;l.offset=[t,e],n===s&&r.WQ(l.offset,l.offset,x),i===s&&r.Re(l.offset,l.offset,x)}if(o){const{offset:[e,n],flips:i}=l,r=(1<<t)-(e+n);i[0]=-i[0],l.offset[1]=r,l.flips=i}return l},v=e=>{const t=Number(e)%4,n=r.vt(),i=[o,o];let s=BigInt(e);const l=[];for(;s>0n;)l.push(Number(s%4n)),s>>=2n;for(let o=l.length-1;o>=0;o--){r.hs(n,n,2);const e=p(l[o],i);r.WQ(n,n,e),r.lw(i,i,g(l[o]))}return{flips:i,k:t,offset:a(n)}},b=(e,t)=>{let[n,i]=e,r=0,o=t[0]===s?-(n+i):n+i,a=t[1]===s?-n:n,l=t[0]===s?-i:i;return r=t[0]+t[1]===0?l<1?0:a>1?3:o>1?2:1:o<1?0:a>1?3:l>1?2:1,r},w=function(e,t,n){void 0===n&&(n="uv");const i="vu"===n||"wu"===n||"vw"===n,r="wv"===n||"vw"===n,s="wu"===n||"uw"===n;let o=[...e];if(s&&(o[0]=e[1],o[1]=e[0]),r){const[e,n]=o;o[1]=(1<<t)-(e+n)}let a=m(o);return i&&(a=(1n<<BigInt(2*t))-a-1n),a},m=e=>{const t=(e=>{const t=Math.ceil(e[0])+Math.ceil(e[1]);return 0===t?1:1+Math.floor(Math.log2(t))})(e),n=new Array(t),i=[o,o],s=r.vt();for(let o=0;o<t;o++){const l=r.Re(r.vt(),e,s),c=1<<t-1-o,h=r.hs(r.vt(),l,1/c),d=b(h,i);n[o]=d;const u=a(p(d,i)),x=r.hs(r.vt(),u,c);r.WQ(s,s,x),r.lw(i,i,g(d))}let l=0n;for(let r=0;r<t;r++){const e=1n<<BigInt(2*(t-1-r));l+=BigInt(n[r])*e}return l}}}]);