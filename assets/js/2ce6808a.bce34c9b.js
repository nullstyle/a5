"use strict";(self.webpackChunkproject_website=self.webpackChunkproject_website||[]).push([[4338],{1921:(t,n,e)=>{e.d(n,{u$:()=>A,WH:()=>T,ce:()=>S});var o=e(7823),r=e(3522),s=e(842),i=e(8781),a=e(3243),u=e(6864),c=e(1970),l=e(1997),f=e(1148),h=e(3255);o.fG(Float64Array);const g=!1,p=s.o8(l.w),d=s.ze(s.vt(),l.w),x=[0,1,2,3,4].map((t=>{const n=r.vt();return r.$0(n,f.UT*t),n})),v=s.vt();o.fG(Float64Array);const m=r.vt();function w(t,n){const e=(0,i.q8)(t),o=(0,u.s)(e,n.quat,n.angle),c=(0,a.jS)(o,n)?n:(0,a.Sj)(o);if(c.id!==n.id){const e=s.vt();r.$0(m,n.angle),s.ZF(e,t,m);const{point:l,quat:h}=(0,a.MQ)(e,n,c);let g=0;n.angle!==c.angle&&0!==c.angle&&(g=-f.R);let p=(0,i.q8)(l);p[1]=p[1]-g;const d=(0,u.s)(p,h,g);o[0]=d[0],o[1]=d[1]}return(0,i.WP)(o)}function b(t,n){const e=t.getVertices().map((t=>w(t,n)));return c.c.normalizeLongitudes(e)}var M=e(2189);o.fG(Float64Array);const j=r.vt();function S(t,n){const e=1+n-M.To,o=[t],r=50/Math.pow(2,e);for(let c=0;c<25;c++){const n=c/25*r,e=s.fA(Math.cos(c)*n,Math.sin(c)*n);s.WQ(e,e,t),o.push(e)}const i=[];for(const s of o){const e=B(s,n);if(n<M.To||I(e,t))return(0,M.lK)(e);i.push(e)}let a=1/0,u=null;for(const c of i){const n=w(y(c).getCenter(),c.origin),e=s.xg(n,t);e<a&&(a=e,u=c)}if(u)return(0,M.lK)(u);throw new Error("No cell found")}function B(t,n){const e=(0,i.Rb)(t),o={...(0,a.Sj)(e)};r.$0(j,-o.angle);const c=(0,u.r)(e,o.quat,o.angle),g=(0,i.$p)(c),p=function(t){const n=(Math.atan2(t[1],t[0])-l.V+f.JM)%f.JM;return Math.ceil(n/f.UT)%5}(g),{segment:d,orientation:x}=(0,a.b5)(p,o);if(n<M.To)return{S:0n,segment:d,origin:o,resolution:n};if(0!==p){const t=2*f.R*p;r.$0(j,-t),s.ZF(g,g,j)}const v=1+n-M.To;s.hs(g,g,2**v);const m=(0,i.o4)(g);return{S:(0,h.eS)(m,v,x),segment:d,origin:o,resolution:n}}function y(t){let{S:n,segment:e,origin:o,resolution:r}=t;const{quintant:i,orientation:u}=(0,a.BL)(e,o);if(r===M.To-1){const t=function(t){const n=l.LF.clone();return n.transform(x[t]),n}(i);return t}if(r===M.To-2)return function(){const t=[];for(const n of x)t.push(s.ZF(s.vt(),l.v,n));return new c.c(t)}();const f=r-M.To+1;return function(t,n,e){const o=(g?l.LF:l.tK).clone();s.ZF(v,e.offset,l.P9),e.flips[0]===h.NO&&e.flips[1]===h._Y&&o.rotate180();const{k:r}=e,i=e.flips[0]+e.flips[1];return((-2===i||2===i)&&r>1||0===i&&(0===r||3===r))&&o.reflectY(),e.flips[0]===h._Y&&e.flips[1]===h._Y?o.rotate180():e.flips[0]===h._Y?o.translate(d):e.flips[1]===h._Y&&o.translate(p),o.translate(v),o.scale(1/2**t),o.transform(x[n]),o}(f,i,(0,h.ky)(n,f,u))}function T(t){const{S:n,segment:e,origin:o,resolution:r}=(0,M.iu)(t),s=w(y({S:n,segment:e,origin:o,resolution:r}).getCenter(),o);return c.c.normalizeLongitudes([s])[0]}function A(t){const{S:n,segment:e,origin:o,resolution:r}=(0,M.iu)(t);return b(y({S:n,segment:e,origin:o,resolution:r}),o)}function I(t,n){const e=b(y(t),t.origin);return new c.c(e).containsPoint(n)}},2189:(t,n,e)=>{e.d(n,{To:()=>r,iu:()=>u,lK:()=>c,s7:()=>f,xZ:()=>l});var o=e(3243);const r=3,s=31,i=58n,a=0x3ffffffffffffffn;function u(t){const n=function(t){let n=s-1,e=t>>1n;for(;n>0&&0n===(0b1n&e);)n-=1,e>>=n<r?1n:2n;return n}(t);if(0===n)return{origin:o.kt[0],segment:0,S:0n,resolution:n};const e=Number(t>>58n);let u,c;if(1===n){const t=e;u=o.kt[t],c=0}else{const t=Math.floor(e/5);u=o.kt[t],c=(e+u.firstQuintant)%5}if(!u)throw new Error(`Could not parse origin: ${e}`);if(n<r)return{origin:u,segment:c,S:0n,resolution:n};const l=BigInt(2*(n-r+1));return{origin:u,segment:c,S:(t&a)>>i-l,resolution:n}}function c(t){const{origin:n,segment:e,S:o,resolution:a}=t;if(a>s)throw new Error(`Resolution (${a}) is too large`);if(0===a)return 0n;let u;if(a<r)u=BigInt(a);else{u=BigInt(2*(1+a-r)+1)}const c=(e-n.firstQuintant+5)%5;let l;if(l=1===a?BigInt(n.id)<<58n:BigInt(5*n.id+c)<<58n,a>=r){const t=BigInt(2*(a-r+1));if(BigInt(o)>=1n<<t)throw new Error(`S (${o}) is too large for resolution level ${a}`);l+=BigInt(o)<<i-t}return l|=1n<<i-u,l}function l(t,n){const{origin:e,segment:i,S:a,resolution:l}=u(t),f=n??l+1;if(f<=l)throw new Error(`Target resolution (${f}) must be greater than current resolution (${l})`);if(f>s)throw new Error(`Target resolution (${f}) exceeds maximum resolution (${s})`);let h=[e],g=[i];0===l&&(h=o.kt),(0===l&&f>1||1===l)&&(g=[0,1,2,3,4]);const p=f-Math.max(l,r-1),d=Math.pow(4,p),x=[],v=a<<BigInt(2*p);for(const o of h)for(const t of g)for(let n=0;n<d;n++){const e=v+BigInt(n);x.push(c({origin:o,segment:t,S:e,resolution:f}))}return x}function f(t,n){const{origin:e,segment:o,S:r,resolution:s}=u(t),i=n??s-1;if(i<0)throw new Error(`Target resolution (${i}) cannot be negative`);if(i>=s)throw new Error(`Target resolution (${i}) must be less than current resolution (${s})`);return c({origin:e,segment:o,S:r>>BigInt(2*(s-i)),resolution:i})}},2693:(t,n,e)=>{e.r(n),e.d(n,{assets:()=>N,contentTitle:()=>F,default:()=>q,frontMatter:()=>R,metadata:()=>o,toc:()=>Q});const o=JSON.parse('{"id":"globe","title":"Globe","description":"","source":"@site/src/examples/globe.mdx","sourceDirName":".","slug":"/globe","permalink":"/examples/globe","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"examplesSidebar","previous":{"title":"Hilbert Curve","permalink":"/examples/hilbert"},"next":{"title":"Area Variance","permalink":"/examples/area"}}');var r=e(4848),s=e(8453),i=e(6540),a=e(4258),u=(e(5338),e(186)),c=e(1986),l=e(2805),f=e(4922),h=e(9485),g=e(7823),p=e(3522),d=e(842),x=e(8781),v=e(3243),m=e(6864),w=e(1148);g.fG(Float64Array);const b=p.vt(),M=d.vt();const j=new Map;function S(t){const n=(0,h.g)(t),e=[],o=[],r=[];n.forEach(((t,n)=>{const s=t.reduce(((t,n)=>[t[0]+n[0]/5,t[1]+n[1]/5,t[2]+n[2]/5]),[0,0,0]),i=t.map((t=>{const n=function(t,n,e){const o=(0,x.Rb)(t);let r;r=e?{...(0,v.Sj)((0,x.Rb)(e))}:{...(0,v.Sj)(o)},p.$0(b,[0,0,9,6,7,6,5,4,7,7,9,0][r.id]*w.R+r.angle);const s=(0,m.r)(o,r.quat,r.angle),i=(0,x.$p)(s);d.ZF(i,i,b),d.hZ(M,0,0);const a=[0,0,1,2,5,2,3,2,9,2,3,4];for(let u=0;u<=r.id;u++){const t=d.fA(Math.cos(a[u]*w.R),Math.sin(a[u]*w.R));d.hs(t,t,1.232),d.WQ(M,M,t)}return d.WQ(i,i,M),i}(t,0,s);return[n[0],0,-n[1]]})),a=t.map((t=>{let[n,e]=t;return[(n-180)/360,(e+90)/180]}));i.forEach((t=>{e.push(...t)})),a.forEach((t=>{o.push(...t)}));const u=5*n;r.push(u,u+1,u+2,u,u+2,u+3,u,u+3,u+4)}));const s=new f.LoY;return s.setAttribute("position",new f.THS(new Float32Array(e),3)),s.setAttribute("uv",new f.THS(new Float32Array(o),2)),s.setIndex(new f.THS(new Uint32Array(r),1)),s}function B(t){let{lonOffset:n,resolution:e}=t;const o=(0,u.H)(f.Tap,"/textures/bluemarble.jpg");o.offset.x=n/360,o.wrapS=o.wrapT=f.GJx;const s=(0,i.useMemo)((()=>{if(j.has(e))return j.get(e);const t=S(e);return j.set(e,t),t}),[e]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("group",{position:[-2.6,0,3.8],children:(0,r.jsx)("mesh",{geometry:s,children:(0,r.jsx)("meshBasicMaterial",{map:o,depthTest:!1,side:f.$EB})})}),(0,r.jsx)(l.N,{enableDamping:!0,enableZoom:!0,enableRotate:!1,mouseButtons:{LEFT:f.kBv.PAN},zoomToCursor:!0})]})}const y={position:[0,4.2,0],up:[-Math.cos(-.23),0,Math.sin(-.23)]},T=()=>{const[t,n]=(0,i.useState)(0),[e,o]=(0,i.useState)(3);return(0,r.jsxs)("div",{style:{position:"absolute",height:"100%",width:"100%",top:0,left:0},children:[(0,r.jsx)("div",{style:{position:"absolute",top:"20px",left:"20px",zIndex:1,display:"flex",flexDirection:"column",gap:"10px"},children:(0,r.jsxs)("div",{style:{backgroundColor:"#fff",padding:"8px",borderRadius:"4px",boxShadow:"0 2px 4px rgba(0,0,0,0.2)"},children:[(0,r.jsx)("input",{type:"range",min:"-180",max:"180",value:t,onChange:t=>n(Number(t.target.value)),style:{width:"300px"}}),(0,r.jsxs)("div",{style:{textAlign:"center",fontSize:"12px"},children:["Longitude Offset: ",t,"\xb0"]})]})}),(0,r.jsxs)("div",{style:{position:"absolute",top:"100px",left:"20px",backgroundColor:"#fff",padding:"8px",borderRadius:"4px",boxShadow:"0 2px 4px rgba(0,0,0,0.2)",zIndex:1,textAlign:"center"},children:[(0,r.jsx)("input",{type:"range",min:"2",max:"7",value:e,onChange:t=>o(Number(t.target.value)),style:{width:"300px"}}),(0,r.jsxs)("div",{style:{textAlign:"center",fontSize:"12px"},children:["Resolution: ",e]})]}),(0,r.jsx)(c.Hl,{camera:y,children:(0,r.jsx)(i.Suspense,{fallback:null,children:(0,r.jsx)(B,{lonOffset:t,resolution:e})})})]})},A=T;var I=e(999);class $ extends i.Component{static title="Globe";static code=(()=>`${a.l}/examples/website/globe`)();static parameters={};static renderInfo(t){return(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{children:"Globe"}),(0,r.jsx)("p",{children:"Visualization of how the globe is mapped onto the faces of the dodecahedron."}),(0,r.jsx)("p",{children:"By varying the longitudal offset, different regions can be place in different faces."}),(0,r.jsx)("p",{children:"The chosen offset maximizes the amount of land mass in the first 8 faces, with the remaining 4 faces being mostly uninhabited."}),(0,r.jsxs)("p",{children:["Texture: ",(0,r.jsx)("a",{href:"https://visibleearth.nasa.gov/collection/1484/blue-marble",children:"NASA Blue Marble"})]})]})}render(){return(0,r.jsx)("div",{style:{width:"100%",height:"100%",position:"absolute",background:"#aaa"},children:(0,r.jsx)(A,{...this.props})})}}const k=(0,I.xv)($),R={},F="Globe",N={},Q=[];function E(t){const n={h1:"h1",header:"header",...(0,s.R)(),...t.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"globe",children:"Globe"})}),"\n","\n",(0,r.jsx)(k,{})]})}function q(t={}){const{wrapper:n}={...(0,s.R)(),...t.components};return n?(0,r.jsx)(n,{...t,children:(0,r.jsx)(E,{...t})}):E(t)}},3243:(t,n,e)=>{e.d(n,{BL:()=>M,MQ:()=>j,Sj:()=>S,b5:()=>b,jS:()=>B,kt:()=>v});var o=e(7823),r=e(9699),s=e(329),i=e(842),a=e(8781),u=e(1148);o.fG(Float64Array);const c=[0,0,1],l=["vu","uw","vw","vw","vw"],f=["wu","uw","vw","vu","uw"],h=["wu","uv","wv","wu","uw"],g=["vu","uv","wv","wu","uw"],p=[l,g,h,f,h,g,h,f,f,f,g,g],d=[4,2,3,2,0,4,3,2,2,0,3,0],x=[0,1,2,4,3,5,7,8,6,11,10,9],v=[];let m=0;function w(t,n){const e={id:m,axis:t,quat:(0,a.r5)(t),angle:n,orientation:p[m],firstQuintant:d[m]};v.push(e),m++}function b(t,n){const e=n.orientation,o=((e===l||e===f?-1:1)*((t-n.firstQuintant+5)%5)+5)%5,r=e[o];return{segment:(n.firstQuintant+o)%5,orientation:r}}function M(t,n){const e=n.orientation,o=e===l||e===f?-1:1,r=(t-n.firstQuintant+5)%5,s=e[r];return{quintant:(n.firstQuintant+o*r+5)%5,orientation:s}}function j(t,n,e){const o=r.vt();r.B8(o,n.quat);const l=(0,a.uB)(e.axis),f=s.vt();s.gL(f,l,o);const h=i.vt();i.S8(h,[f[0],f[1]]),i.hs(h,h,2*u.mN);const g=i.vt();i.Re(g,t,h);const p=r.vt();return r.Yc(p,c,f),r.lw(p,n.quat,p),{point:g,quat:p}}function S(t){let n=1/0,e=v[0];for(const o of v){const r=y(t,o.axis);r<n&&(n=r,e=o)}return e}function B(t,n){return y(t,n.axis)>.49}function y(t,n){const[e,o]=t,[r,s]=n,i=r-e,a=s-o,u=Math.sin(a/2),c=Math.sin(i/2);return u*u+c*c*Math.sin(o)*Math.sin(s)}!function(){w([0,0],0);for(let t=0;t<5;t++){const n=t*u.UT,e=n+u.R;w([n,u.Kk],u.R),w([e,Math.PI-u.Kk],u.R)}w([0,Math.PI],0)}(),v.sort(((t,n)=>x.indexOf(t.id)-x.indexOf(n.id))),v.forEach(((t,n)=>t.id=n))},3255:(t,n,e)=>{e.d(n,{NO:()=>i,_Y:()=>s,eS:()=>w,ky:()=>x});var o=e(7823),r=e(842);o.fG(Float64Array);const s=-1,i=1,a=t=>{let[n,e]=t;return r.fA(n-e,e)},u=r.fA(1,0),c=r.fA(0,1),l=r.ze(r.vt(),u),f=r.ze(r.vt(),c),h=r.fA(0,0),g=(t,n)=>{let[e,o]=n,a=h,g=h;switch(e===i&&o===i?(a=u,g=c):e===s&&o===i?(a=f,g=l):e===i&&o===s?(a=c,g=u):e===s&&o===s&&(a=l,g=f),t){case 0:return h;case 1:return a;case 2:return r.WQ(r.vt(),g,a);case 3:return r.Ln(r.vt(),g,a,2);default:throw new Error(`Invalid Quaternary value: ${t}`)}},p=t=>[[i,i],[i,s],[i,i],[s,i]][t],d=r.fA(-1,1),x=(t,n,e)=>{let o=BigInt(t);const i="wv"===e||"vw"===e,a="wu"===e||"uw"===e;("vu"===e||"wu"===e||"vw"===e)&&(o=(1n<<BigInt(2*n))-o-1n);const u=v(o);if(a){const{offset:[t,n],flips:[e,o]}=u;u.offset=[n,t],e===s&&r.WQ(u.offset,u.offset,d),o===s&&r.Re(u.offset,u.offset,d)}if(i){const{offset:[t,e],flips:o}=u,r=(1<<n)-(t+e);o[0]=-o[0],u.offset[1]=r,u.flips=o}return u},v=t=>{const n=Number(t)%4,e=r.vt(),o=[i,i];let s=BigInt(t);const u=[];for(;s>0n;)u.push(Number(s%4n)),s>>=2n;for(let i=u.length-1;i>=0;i--){r.hs(e,e,2);const t=g(u[i],o);r.WQ(e,e,t),r.lw(o,o,p(u[i]))}return{flips:o,k:n,offset:a(e)}},m=(t,n)=>{let[e,o]=t,r=0,i=n[0]===s?-(e+o):e+o,a=n[1]===s?-e:e,u=n[0]===s?-o:o;return r=n[0]+n[1]===0?u<1?0:a>1?3:i>1?2:1:i<1?0:a>1?3:u>1?2:1,r},w=function(t,n,e){void 0===e&&(e="uv");const o="vu"===e||"wu"===e||"vw"===e,r="wv"===e||"vw"===e,s="wu"===e||"uw"===e;let i=[...t];if(s&&(i[0]=t[1],i[1]=t[0]),r){const[t,e]=i;i[1]=(1<<n)-(t+e)}let a=b(i);return o&&(a=(1n<<BigInt(2*n))-a-1n),a},b=t=>{const n=(t=>{const n=Math.ceil(t[0])+Math.ceil(t[1]);return 0===n?1:1+Math.floor(Math.log2(n))})(t),e=new Array(n),o=[i,i],s=r.vt();for(let i=0;i<n;i++){const u=r.Re(r.vt(),t,s),c=1<<n-1-i,l=r.hs(r.vt(),u,1/c),f=m(l,o);e[i]=f;const h=a(g(f,o)),d=r.hs(r.vt(),h,c);r.WQ(s,s,d),r.lw(o,o,p(f))}let u=0n;for(let r=0;r<n;r++){const t=1n<<BigInt(2*(n-1-r));u+=BigInt(e[r])*t}return u}},6864:(t,n,e)=>{e.d(n,{s:()=>x,r:()=>v});var o=e(7823),r=e(329),s=e(9699),i=e(8781),a=e(1148);function u(t){const n=t/a.UT;return(n-Math.round(n))*a.UT}function c(t){const n=t*a.ZP;return Math.tan(n)}const l=a.R,f=c(l)/l;function h(t){return function(t){return Math.atan(t)/a.ZP}(t*f)}function g(t,n){const e=t*(.95-.05*(Math.abs(n)/l));return Math.tan(e)}function p(t){let[n,e]=t;const o=u(e),r=function(t){return c(t)/f}(u(e)),s=r-o,i=Math.cos(o)/Math.cos(r)*n,l=a.mN/Math.cos(r),h=g(l,r)/l;return[g(i,r)/h,e+s]}function d(t){let[n,e]=t;const o=u(e),r=h(o),s=o-r,i=a.mN/Math.cos(o),c=function(t,n){const e=Math.abs(n)/l;return Math.atan(t)/(.95-.05*e)}(n*(g(i,o)/i),o);return[c/(Math.cos(r)/Math.cos(o)),e-s]}function x(t,n,e){const[o,s]=p(t),a=function(t){let[n,e]=t;return[e,Math.atan(n)]}([o,s+e]),u=(0,i.uB)(a);return r.gL(u,u,n),(0,i.lN)(u)}function v(t,n,e){const[o,a,u]=(0,i.uB)(t),c=s.vt();s.B8(c,n);const l=r.vt();r.gL(l,[o,a,u],c);const f=function(t){let[n,e]=t;return[Math.tan(e),n]}((0,i.lN)(l));return f[1]=f[1]-e,d(f)}o.fG(Float64Array)},8781:(t,n,e)=>{e.d(n,{$p:()=>l,Rb:()=>d,WP:()=>x,lN:()=>h,o4:()=>f,q8:()=>c,r5:()=>v,uB:()=>g});var o=e(7823),r=e(842),s=e(9699),i=e(1997);function a(t){return t*(Math.PI/180)}function u(t){return t*(180/Math.PI)}function c(t){return[r.Bw(t),Math.atan2(t[1],t[0])]}function l(t){let[n,e]=t;return[n*Math.cos(e),n*Math.sin(e)]}function f(t){return r.ZF(r.vt(),t,i.wc)}function h(t){const n=Math.atan2(t[1],t[0]),e=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);return[n,Math.acos(t[2]/e)]}function g(t){let[n,e]=t;return[Math.sin(e)*Math.cos(n),Math.sin(e)*Math.sin(n),Math.cos(e)]}o.fG(Float64Array);const p=93;function d(t){let[n,e]=t;return[a(n+p),a(90-e)]}function x(t){let[n,e]=t;return[u(n)-p,90-u(e)]}function v(t){const n=g(t),e=s.vt();return s.Yc(e,[0,0,1],n),e}},9485:(t,n,e)=>{e.d(n,{g:()=>s});var o=e(1921),r=e(2189);function s(t){let n=[],e=1,s=0n;1===t?(e=12,s=0b10n<<56n):(e=60,s=0b01n<<56n);for(let i=0;i<e;i++){const e=BigInt(i)<<58n|s;if(t<r.To)n.push((0,o.u$)(e));else{const s=(0,r.xZ)(e,t);n=n.concat(s.map((t=>(0,o.u$)(t))))}}return n}}}]);