"use strict";(self.webpackChunkproject_website=self.webpackChunkproject_website||[]).push([[3173],{1921:(t,e,n)=>{n.d(e,{u$:()=>I,WH:()=>A,ce:()=>j});var r=n(7823),o=n(3522),i=n(842),s=n(8781),a=n(3243),l=n(6864),c=n(1970),u=n(1997),h=n(1148),p=n(3255);r.fG(Float64Array);const d=!1,f=i.o8(u.w),g=i.ze(i.vt(),u.w),x=[0,1,2,3,4].map((t=>{const e=o.vt();return o.$0(e,h.UT*t),e})),m=i.vt();r.fG(Float64Array);const M=o.vt();function v(t,e){const n=(0,s.q8)(t),r=(0,l.s)(n,e.quat,e.angle),c=(0,a.jS)(r,e)?e:(0,a.Sj)(r);if(c.id!==e.id){const n=i.vt();o.$0(M,e.angle),i.ZF(n,t,M);const{point:u,quat:p}=(0,a.MQ)(n,e,c);let d=0;e.angle!==c.angle&&0!==c.angle&&(d=-h.R);let f=(0,s.q8)(u);f[1]=f[1]-d;const g=(0,l.s)(f,p,d);r[0]=g[0],r[1]=g[1]}return(0,s.WP)(r)}function b(t,e){const n=t.getVertices().map((t=>v(t,e)));return c.c.normalizeLongitudes(n)}var w=n(2189);r.fG(Float64Array);const y=o.vt();function j(t,e){const n=1+e-w.To,r=[t],o=50/Math.pow(2,n);for(let c=0;c<25;c++){const e=c/25*o,n=i.fA(Math.cos(c)*e,Math.sin(c)*e);i.WQ(n,n,t),r.push(n)}const s=[];for(const i of r){const n=S(i,e);if(e<w.To||P(n,t))return(0,w.lK)(n);s.push(n)}let a=1/0,l=null;for(const c of s){const e=v(k(c).getCenter(),c.origin),n=i.xg(e,t);n<a&&(a=n,l=c)}if(l)return(0,w.lK)(l);throw new Error("No cell found")}function S(t,e){const n=(0,s.Rb)(t),r={...(0,a.Sj)(n)};o.$0(y,-r.angle);const c=(0,l.r)(n,r.quat,r.angle),d=(0,s.$p)(c),f=function(t){const e=(Math.atan2(t[1],t[0])-u.V+h.JM)%h.JM;return Math.ceil(e/h.UT)%5}(d),{segment:g,orientation:x}=(0,a.b5)(f,r);if(e<w.To)return{S:0n,segment:g,origin:r,resolution:e};if(0!==f){const t=2*h.R*f;o.$0(y,-t),i.ZF(d,d,y)}const m=1+e-w.To;i.hs(d,d,2**m);const M=(0,s.o4)(d);return{S:(0,p.eS)(M,m,x),segment:g,origin:r,resolution:e}}function k(t){let{S:e,segment:n,origin:r,resolution:o}=t;const{quintant:s,orientation:l}=(0,a.BL)(n,r);if(o===w.To-1){const t=function(t){const e=u.LF.clone();return e.transform(x[t]),e}(s);return t}if(o===w.To-2)return function(){const t=[];for(const e of x)t.push(i.ZF(i.vt(),u.v,e));return new c.c(t)}();const h=o-w.To+1;return function(t,e,n){const r=(d?u.LF:u.tK).clone();i.ZF(m,n.offset,u.P9),n.flips[0]===p.NO&&n.flips[1]===p._Y&&r.rotate180();const{k:o}=n,s=n.flips[0]+n.flips[1];return((-2===s||2===s)&&o>1||0===s&&(0===o||3===o))&&r.reflectY(),n.flips[0]===p._Y&&n.flips[1]===p._Y?r.rotate180():n.flips[0]===p._Y?r.translate(g):n.flips[1]===p._Y&&r.translate(f),r.translate(m),r.scale(1/2**t),r.transform(x[e]),r}(h,s,(0,p.ky)(e,h,l))}function A(t){const{S:e,segment:n,origin:r,resolution:o}=(0,w.iu)(t),i=v(k({S:e,segment:n,origin:r,resolution:o}).getCenter(),r);return c.c.normalizeLongitudes([i])[0]}function I(t){const{S:e,segment:n,origin:r,resolution:o}=(0,w.iu)(t);return b(k({S:e,segment:n,origin:r,resolution:o}),r)}function P(t,e){const n=b(k(t),t.origin);return new c.c(n).containsPoint(e)}},2189:(t,e,n)=>{n.d(e,{To:()=>o,iu:()=>l,lK:()=>c,s7:()=>h,xZ:()=>u});var r=n(3243);const o=3,i=31,s=58n,a=0x3ffffffffffffffn;function l(t){const e=function(t){let e=i-1,n=t>>1n;for(;e>0&&0n===(0b1n&n);)e-=1,n>>=e<o?1n:2n;return e}(t);if(0===e)return{origin:r.kt[0],segment:0,S:0n,resolution:e};const n=Number(t>>58n);let l,c;if(1===e){const t=n;l=r.kt[t],c=0}else{const t=Math.floor(n/5);l=r.kt[t],c=(n+l.firstQuintant)%5}if(!l)throw new Error(`Could not parse origin: ${n}`);if(e<o)return{origin:l,segment:c,S:0n,resolution:e};const u=BigInt(2*(e-o+1));return{origin:l,segment:c,S:(t&a)>>s-u,resolution:e}}function c(t){const{origin:e,segment:n,S:r,resolution:a}=t;if(a>i)throw new Error(`Resolution (${a}) is too large`);if(0===a)return 0n;let l;if(a<o)l=BigInt(a);else{l=BigInt(2*(1+a-o)+1)}const c=(n-e.firstQuintant+5)%5;let u;if(u=1===a?BigInt(e.id)<<58n:BigInt(5*e.id+c)<<58n,a>=o){const t=BigInt(2*(a-o+1));if(BigInt(r)>=1n<<t)throw new Error(`S (${r}) is too large for resolution level ${a}`);u+=BigInt(r)<<s-t}return u|=1n<<s-l,u}function u(t,e){const{origin:n,segment:s,S:a,resolution:u}=l(t),h=e??u+1;if(h<=u)throw new Error(`Target resolution (${h}) must be greater than current resolution (${u})`);if(h>i)throw new Error(`Target resolution (${h}) exceeds maximum resolution (${i})`);let p=[n],d=[s];0===u&&(p=r.kt),(0===u&&h>1||1===u)&&(d=[0,1,2,3,4]);const f=h-Math.max(u,o-1),g=Math.pow(4,f),x=[],m=a<<BigInt(2*f);for(const r of p)for(const t of d)for(let e=0;e<g;e++){const n=m+BigInt(e);x.push(c({origin:r,segment:t,S:n,resolution:h}))}return x}function h(t,e){const{origin:n,segment:r,S:o,resolution:i}=l(t),s=e??i-1;if(s<0)throw new Error(`Target resolution (${s}) cannot be negative`);if(s>=i)throw new Error(`Target resolution (${s}) must be less than current resolution (${i})`);return c({origin:n,segment:r,S:o>>BigInt(2*(i-s)),resolution:s})}},3243:(t,e,n)=>{n.d(e,{BL:()=>w,MQ:()=>y,Sj:()=>j,b5:()=>b,jS:()=>S,kt:()=>m});var r=n(7823),o=n(9699),i=n(329),s=n(842),a=n(8781),l=n(1148);r.fG(Float64Array);const c=[0,0,1],u=["vu","uw","vw","vw","vw"],h=["wu","uw","vw","vu","uw"],p=["wu","uv","wv","wu","uw"],d=["vu","uv","wv","wu","uw"],f=[u,d,p,h,p,d,p,h,h,h,d,d],g=[4,2,3,2,0,4,3,2,2,0,3,0],x=[0,1,2,4,3,5,7,8,6,11,10,9],m=[];let M=0;function v(t,e){const n={id:M,axis:t,quat:(0,a.r5)(t),angle:e,orientation:f[M],firstQuintant:g[M]};m.push(n),M++}function b(t,e){const n=e.orientation,r=((n===u||n===h?-1:1)*((t-e.firstQuintant+5)%5)+5)%5,o=n[r];return{segment:(e.firstQuintant+r)%5,orientation:o}}function w(t,e){const n=e.orientation,r=n===u||n===h?-1:1,o=(t-e.firstQuintant+5)%5,i=n[o];return{quintant:(e.firstQuintant+r*o+5)%5,orientation:i}}function y(t,e,n){const r=o.vt();o.B8(r,e.quat);const u=(0,a.uB)(n.axis),h=i.vt();i.gL(h,u,r);const p=s.vt();s.S8(p,[h[0],h[1]]),s.hs(p,p,2*l.mN);const d=s.vt();s.Re(d,t,p);const f=o.vt();return o.Yc(f,c,h),o.lw(f,e.quat,f),{point:d,quat:f}}function j(t){let e=1/0,n=m[0];for(const r of m){const o=k(t,r.axis);o<e&&(e=o,n=r)}return n}function S(t,e){return k(t,e.axis)>.49}function k(t,e){const[n,r]=t,[o,i]=e,s=o-n,a=i-r,l=Math.sin(a/2),c=Math.sin(s/2);return l*l+c*c*Math.sin(r)*Math.sin(i)}!function(){v([0,0],0);for(let t=0;t<5;t++){const e=t*l.UT,n=e+l.R;v([e,l.Kk],l.R),v([n,Math.PI-l.Kk],l.R)}v([0,Math.PI],0)}(),m.sort(((t,e)=>x.indexOf(t.id)-x.indexOf(e.id))),m.forEach(((t,e)=>t.id=e))},3255:(t,e,n)=>{n.d(e,{NO:()=>s,_Y:()=>i,eS:()=>v,ky:()=>x});var r=n(7823),o=n(842);r.fG(Float64Array);const i=-1,s=1,a=t=>{let[e,n]=t;return o.fA(e-n,n)},l=o.fA(1,0),c=o.fA(0,1),u=o.ze(o.vt(),l),h=o.ze(o.vt(),c),p=o.fA(0,0),d=(t,e)=>{let[n,r]=e,a=p,d=p;switch(n===s&&r===s?(a=l,d=c):n===i&&r===s?(a=h,d=u):n===s&&r===i?(a=c,d=l):n===i&&r===i&&(a=u,d=h),t){case 0:return p;case 1:return a;case 2:return o.WQ(o.vt(),d,a);case 3:return o.Ln(o.vt(),d,a,2);default:throw new Error(`Invalid Quaternary value: ${t}`)}},f=t=>[[s,s],[s,i],[s,s],[i,s]][t],g=o.fA(-1,1),x=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n="uv");let r=BigInt(t);const s="wv"===n||"vw"===n,a="wu"===n||"uw"===n;("vu"===n||"wu"===n||"vw"===n)&&(r=(1n<<BigInt(2*e))-r-1n);const l=m(r);if(a){const{offset:[t,e],flips:[n,r]}=l;l.offset=[e,t],n===i&&o.WQ(l.offset,l.offset,g),r===i&&o.Re(l.offset,l.offset,g)}if(s){const{offset:[t,n],flips:r}=l,o=(1<<e)-(t+n);r[0]=-r[0],l.offset[1]=o,l.flips=r}return l},m=t=>{const e=Number(t)%4,n=o.vt(),r=[s,s];let i=BigInt(t);const l=[];for(;i>0n;)l.push(Number(i%4n)),i>>=2n;for(let s=l.length-1;s>=0;s--){o.hs(n,n,2);const t=d(l[s],r);o.WQ(n,n,t),o.lw(r,r,f(l[s]))}return{flips:r,k:e,offset:a(n)}},M=(t,e)=>{let[n,r]=t,o=0,s=e[0]===i?-(n+r):n+r,a=e[1]===i?-n:n,l=e[0]===i?-r:r;return o=e[0]+e[1]===0?l<1?0:a>1?3:s>1?2:1:s<1?0:a>1?3:l>1?2:1,o},v=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n="uv");const r="vu"===n||"wu"===n||"vw"===n,o="wv"===n||"vw"===n,i="wu"===n||"uw"===n;let s=[...t];if(i&&(s[0]=t[1],s[1]=t[0]),o){const[t,n]=s;s[1]=(1<<e)-(t+n)}let a=b(s);return r&&(a=(1n<<BigInt(2*e))-a-1n),a},b=t=>{const e=(t=>{const e=Math.ceil(t[0])+Math.ceil(t[1]);return 0===e?1:1+Math.floor(Math.log2(e))})(t),n=new Array(e),r=[s,s],i=o.vt();for(let s=0;s<e;s++){const l=o.Re(o.vt(),t,i),c=1<<e-1-s,u=o.hs(o.vt(),l,1/c),h=M(u,r);n[s]=h;const p=a(d(h,r)),g=o.hs(o.vt(),p,c);o.WQ(i,i,g),o.lw(r,r,f(h))}let l=0n;for(let o=0;o<e;o++){const t=1n<<BigInt(2*(e-1-o));l+=BigInt(n[o])*t}return l}},5363:(t,e,n)=>{n.d(e,{A:()=>i});n(6540);var r=n(9136),o=n(4848);function i(t){let{children:e,fallback:n}=t;return(0,r.A)()?(0,o.jsx)(o.Fragment,{children:e?.()}):n??null}},6864:(t,e,n)=>{n.d(e,{s:()=>x,r:()=>m});var r=n(7823),o=n(329),i=n(9699),s=n(8781),a=n(1148);function l(t){const e=t/a.UT;return(e-Math.round(e))*a.UT}function c(t){const e=t*a.ZP;return Math.tan(e)}const u=a.R,h=c(u)/u;function p(t){return function(t){return Math.atan(t)/a.ZP}(t*h)}function d(t,e){const n=t*(.95-.05*(Math.abs(e)/u));return Math.tan(n)}function f(t){let[e,n]=t;const r=l(n),o=function(t){return c(t)/h}(l(n)),i=o-r,s=Math.cos(r)/Math.cos(o)*e,u=a.mN/Math.cos(o),p=d(u,o)/u;return[d(s,o)/p,n+i]}function g(t){let[e,n]=t;const r=l(n),o=p(r),i=r-o,s=a.mN/Math.cos(r),c=function(t,e){const n=Math.abs(e)/u;return Math.atan(t)/(.95-.05*n)}(e*(d(s,r)/s),r);return[c/(Math.cos(o)/Math.cos(r)),n-i]}function x(t,e,n){const[r,i]=f(t),a=function(t){let[e,n]=t;return[n,Math.atan(e)]}([r,i+n]),l=(0,s.uB)(a);return o.gL(l,l,e),(0,s.lN)(l)}function m(t,e,n){const[r,a,l]=(0,s.uB)(t),c=i.vt();i.B8(c,e);const u=o.vt();o.gL(u,[r,a,l],c);const h=function(t){let[e,n]=t;return[Math.tan(n),e]}((0,s.lN)(u));return h[1]=h[1]-n,g(h)}r.fG(Float64Array)},7120:(t,e,n)=>{n.r(e),n.d(e,{assets:()=>Q,contentTitle:()=>W,default:()=>Y,frontMatter:()=>E,metadata:()=>r,toc:()=>N});const r=JSON.parse('{"id":"area","title":"Area Variance","description":"","source":"@site/src/examples/area.mdx","sourceDirName":".","slug":"/area","permalink":"/examples/area","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{},"sidebar":"examplesSidebar","previous":{"title":"Globe","permalink":"/examples/globe"},"next":{"title":"Cells","permalink":"/examples/cells"}}');var o=n(4848),i=n(8453),s=n(6540),a=n(4258),l=(n(5338),n(9533)),c=n(3727),u=n(5212),h=n(5890),p=n(4923),d=n(9485),f=n(8781),g=n(435),x=n(1970);const m=["#7F3C8D","#11A579","#3969AC","#F2B701","#E73F74","#80BA5A","#E68310","#008695","#CF1C90","#f97b72","#4b4b8f","#A5AA99"],M=t=>{let{areaLimits:e,perimeterLimits:n,tilingSystem:r,onTilingSystemChange:i}=t;const[s,a]=e,[l,c]=n,u=a/s,h=c/l;return(0,o.jsxs)("div",{style:{position:"absolute",top:"50px",left:"60px",background:"white",padding:"12px",borderRadius:"4px",boxShadow:"0 2px 4px rgba(0,0,0,0.2)",zIndex:1,fontSize:"12px",lineHeight:"1.5"},children:[(0,o.jsxs)("div",{style:{marginBottom:"12px"},children:[(0,o.jsx)("label",{style:{marginRight:"8px"},children:"Tiling System:"}),(0,o.jsxs)("select",{value:r,onChange:t=>i(t.target.value),style:{padding:"4px"},children:[(0,o.jsx)("option",{value:"h3",children:"H3 (Hexagons)"}),(0,o.jsx)("option",{value:"a5",children:"A5 (Pentagons)"})]})]}),(0,o.jsx)("h3",{style:{margin:"0 0 8px",fontSize:"14px"},children:"Area Statistics"}),(0,o.jsxs)("div",{children:["Min Area: ",s.toFixed(2)," km\xb2"]}),(0,o.jsxs)("div",{children:["Max Area: ",a.toFixed(2)," km\xb2"]}),(0,o.jsxs)("div",{children:["Area Ratio: ",u.toFixed(4)]}),(0,o.jsx)("h3",{style:{margin:"12px 0 8px",fontSize:"14px"},children:"Area Statistics"}),(0,o.jsxs)("div",{children:["Min Perimeter: ",l.toFixed(2)," km"]}),(0,o.jsxs)("div",{children:["Max Perimeter: ",c.toFixed(2)," km"]}),(0,o.jsxs)("div",{children:["Perimeter Ratio: ",h.toFixed(4)]})]})},v=t=>{let{tilingSystem:e,h3Output:n,a5Output:r,onCellHover:i}=t;const s=t=>{const e=[],n=t.length;for(let r=0;r<n;r++){const o=t[(r-1+n)%n],i=t[r],s=t[(r+1)%n],a=[o[0]-i[0],o[1]-i[1]],l=[s[0]-i[0],s[1]-i[1]],c=(a[0]*l[0]+a[1]*l[1])/(Math.sqrt(a[0]*a[0]+a[1]*a[1])*Math.sqrt(l[0]*l[0]+l[1]*l[1])),u=Math.max(-1,Math.min(1,c)),h=180*Math.acos(u)/Math.PI;e.push(h)}return e},a=t=>{const e=(0,p.u$)(t.cell),n=(0,p._k)(t.cell),r=n[0]*Math.PI/180,o=n[1]*Math.PI/180;return e.map((t=>{const e=t[0]*Math.PI/180,n=t[1]*Math.PI/180,i=Math.sin(r)*Math.sin(e)+Math.cos(r)*Math.cos(e)*Math.cos(n-o);return[Math.cos(e)*Math.sin(n-o)/i,(Math.cos(r)*Math.sin(e)-Math.sin(r)*Math.cos(e)*Math.cos(n-o))/i]}))},l=t=>{const{vertices:e}=t,n=e.reduce(((t,e)=>{let[n,r,o]=t,[i,s]=e;const a=s*Math.PI/180,l=i*Math.PI/180;return[n+Math.cos(a)*Math.cos(l),r+Math.cos(a)*Math.sin(l),o+Math.sin(a)]}),[0,0,0]),r=Math.sqrt(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]),o=n.map((t=>t/r)),i=180*Math.asin(o[2])/Math.PI,s=180*Math.atan2(o[1],o[0])/Math.PI,a=i*Math.PI/180,l=s*Math.PI/180;return e.map((t=>{const e=t[1]*Math.PI/180,n=t[0]*Math.PI/180,r=Math.sin(a)*Math.sin(e)+Math.cos(a)*Math.cos(e)*Math.cos(n-l);return[Math.cos(e)*Math.sin(n-l)/r,(Math.cos(a)*Math.sin(e)-Math.sin(a)*Math.cos(e)*Math.cos(n-l))/r]}))},c=(t,e)=>{const n=t[0],r=Math.atan2(n[1],n[0]),o=-Math.PI/2-r,i=t.map((t=>{const n=t[0]*Math.cos(o)-t[1]*Math.sin(o),r=t[0]*Math.sin(o)+t[1]*Math.cos(o);return[n*e,r*e]}));let s="M";return i.forEach(((t,e)=>{const n=50+t[0],r=50-t[1];s+=`${0===e?"":" L"}${n},${r}`})),s+="Z",{path:s,transformedPoints:i}},{smallest:u,largest:h}=(()=>{const t=n.filter((t=>!(0,p.PB)(t.cell))).sort(((t,e)=>t.properties.area-e.properties.area));return{smallest:t[0],largest:t[t.length-1]}})(),{smallest:d,largest:f}=(()=>{const t=[...r].sort(((t,e)=>t.properties.area-e.properties.area));return{smallest:t[0],largest:t[t.length-1]}})(),g="h3"===e?u:d,x="h3"===e?h:f,m="h3"===e?a(g):l(g),M="h3"===e?a(x):l(x),v=45/Math.max(...M.map((t=>Math.sqrt(t[0]*t[0]+t[1]*t[1])))),{path:b,transformedPoints:w}=c(m,v),{path:y,transformedPoints:j}=c(M,v),S=s(w),k=s(j);return(0,o.jsxs)("div",{style:{position:"absolute",bottom:"20px",right:"20px",background:"white",padding:"12px",borderRadius:"4px",boxShadow:"0 2px 4px rgba(0,0,0,0.2)",zIndex:10,display:"flex",flexDirection:"column",gap:"10px",maxWidth:"300px"},children:[(0,o.jsx)("h3",{style:{margin:"0 0 8px",fontSize:"14px",textAlign:"center"},children:"Cell Comparison"}),(0,o.jsxs)("div",{style:{display:"flex",gap:"10px",alignItems:"flex-start"},children:[(0,o.jsxs)("div",{children:[(0,o.jsx)("p",{style:{margin:"0 0 5px",fontSize:"12px",textAlign:"left"},children:"Smallest Cell"}),(0,o.jsx)("svg",{width:"100",height:"100",viewBox:"0 0 100 100",style:{border:"1px solid #ccc",cursor:"pointer"},onMouseEnter:()=>i(g,!0),onMouseLeave:()=>i(g,!1),children:(0,o.jsx)("path",{d:b,fill:"#6baed6",stroke:"#000",strokeWidth:"1"})}),(0,o.jsxs)("p",{style:{margin:"5px 0 0",fontSize:"10px",textAlign:"left"},children:[g.properties.area.toFixed(2)," km\xb2"]}),(0,o.jsxs)("div",{style:{marginTop:"5px",fontSize:"10px"},children:[(0,o.jsx)("p",{style:{margin:"0 0 2px",fontWeight:"bold"},children:"Angles (degrees):"}),(0,o.jsx)("div",{style:{display:"flex",flexWrap:"wrap",gap:"2px 6px"},children:S.map(((t,e)=>(0,o.jsxs)("span",{children:[t.toFixed(2),"\xb0"]},e)))})]})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)("p",{style:{margin:"0 0 5px",fontSize:"12px",textAlign:"left"},children:"Largest Cell"}),(0,o.jsx)("svg",{width:"100",height:"100",viewBox:"0 0 100 100",style:{border:"1px solid #ccc",cursor:"pointer"},onMouseEnter:()=>i(x,!0),onMouseLeave:()=>i(x,!1),children:(0,o.jsx)("path",{d:y,fill:"#fd8d3c",stroke:"#000",strokeWidth:"1"})}),(0,o.jsxs)("p",{style:{margin:"5px 0 0",fontSize:"10px",textAlign:"left"},children:[x.properties.area.toFixed(2)," km\xb2"]}),(0,o.jsxs)("div",{style:{marginTop:"5px",fontSize:"10px"},children:[(0,o.jsx)("p",{style:{margin:"0 0 2px",fontWeight:"bold"},children:"Angles (degrees):"}),(0,o.jsx)("div",{style:{display:"flex",flexWrap:"wrap",gap:"2px 6px"},children:k.map(((t,e)=>(0,o.jsxs)("span",{children:[t.toFixed(2),"\xb0"]},e)))})]})]})]})]})},b=(0,p.yn)().map((t=>(0,p.xZ)(t,1))).flat();let w=[0,0],y=[0,0];const j=b.map((t=>{const e=(0,p.Sq)(t,"km2"),n=(t=>{const e=(0,p.GX)(t).map((t=>(0,p.E_)(t)));let n=0;for(let r=0;r<e.length;r++){const t=e[r],o=e[(r+1)%e.length];n+=(0,p.vJ)(t,o,"km")}return n})(t);return{cell:t,properties:{area:e,perimeter:n,perimeterRatio:Math.sqrt(1/e)*n}}})),S=j.map((t=>t.properties.area)),k=j.map((t=>t.properties.perimeter));w=[Math.min(...S),Math.max(...S)],y=[Math.min(...k),Math.max(...k)];const A=(0,d.g)(4);let I=[1/0,-1/0],P=[1/0,-1/0];const B=A.map((t=>{const e=t.map((t=>(0,f.uB)((0,f.Rb)(t)))),n=510072e3*(0,x.k)(e)/(4*Math.PI),r=(t=>{let e=0;for(let n=0;n<t.length;n++){const r=t[n],o=t[(n+1)%t.length];e+=(0,p.vJ)([r[1],r[0]],[o[1],o[0]],"km")}return e})(t),o=Math.sqrt(1/n)*r;return I[0]=Math.min(I[0],n),I[1]=Math.max(I[1],n),P[0]=Math.min(P[0],r),P[1]=Math.max(P[1],r),{vertices:t,properties:{area:n,perimeter:r,perimeterRatio:o}}})),F=t=>{let{areaLimits:e,h3AreaLimits:n}=t;const[r,i]=e,[s,a]=n,l=(r-s)/(a-s)*100,c=(i-s)/(a-s)*100;return(0,o.jsxs)("div",{style:{position:"absolute",bottom:"20px",left:"20px",top:"20px",background:"white",padding:"8px",borderRadius:"4px",boxShadow:"0 2px 4px rgba(0,0,0,0.2)",zIndex:1,fontFamily:"sans-serif",fontSize:"12px",display:"flex",flexDirection:"column",alignItems:"center"},children:[(0,o.jsxs)("div",{style:{width:"16px",flex:1,position:"relative",borderRadius:"4px",overflow:"visible"},children:[(0,o.jsx)("div",{style:{position:"absolute",left:0,right:0,top:0,bottom:0,background:`linear-gradient(to bottom, ${m.join(",")})`}}),(0,o.jsx)("div",{style:{position:"absolute",top:0,height:`${l}%`,left:0,right:0,background:"rgba(0, 0, 0, 0.5)",transition:"height 1s ease-in-out"}}),(0,o.jsx)("div",{style:{position:"absolute",bottom:0,height:100-c+"%",left:0,right:0,background:"rgba(0, 0, 0, 0.5)",transition:"height 1s ease-in-out"}}),(0,o.jsx)("div",{style:{position:"absolute",top:`${l}%`,height:c-l+"%",left:"-4px",right:"-4px",border:"1px solid #000",pointerEvents:"none",transition:"top 1s ease-in-out, height 1s ease-in-out"}})]}),(0,o.jsxs)("div",{style:{position:"absolute",left:"32px",top:"0",bottom:"0",display:"flex",flexDirection:"column",justifyContent:"space-between",padding:"0",margin:"10px 0"},children:[(0,o.jsxs)("div",{style:{position:"absolute",top:`${l}%`,background:"white",padding:"2px 4px",borderRadius:"2px",boxShadow:"0 1px 2px rgba(0,0,0,0.1)",whiteSpace:"nowrap",transition:"top 1s ease-in-out",transform:"translateY(-50%)",marginLeft:"4px"},children:[(0,o.jsx)("div",{style:{position:"absolute",left:"-6px",top:"50%",transform:"translateY(-50%)",width:0,height:0,borderTop:"4px solid transparent",borderBottom:"4px solid transparent",borderRight:"6px solid white"}}),Math.round(r)," km\xb2"]}),(0,o.jsxs)("div",{style:{position:"absolute",top:`${c}%`,background:"white",padding:"2px 4px",borderRadius:"2px",boxShadow:"0 1px 2px rgba(0,0,0,0.1)",whiteSpace:"nowrap",transition:"top 1s ease-in-out",transform:"translateY(-50%)",marginLeft:"4px"},children:[(0,o.jsx)("div",{style:{position:"absolute",left:"-6px",top:"50%",transform:"translateY(-50%)",width:0,height:0,borderTop:"4px solid transparent",borderBottom:"4px solid transparent",borderRight:"6px solid white"}}),Math.round(i)," km\xb2"]})]})]})},C=t=>{let{isMobile:e=!1}=t;const[n,r]=(0,s.useState)("h3"),[i,a]=(0,s.useState)(w),[c,d]=(0,s.useState)(y),[f,x]=(0,s.useState)(null),m=(0,s.useRef)(null);(0,s.useEffect)((()=>{"h3"===n?(a(w),d(y)):(a(I),d(P))}),[n]);const b=Array.from({length:11},((t,e)=>w[0]+e*(w[1]-w[0])/10)),S={filled:!0,stroked:!0,extruded:!1,getFillColor:(t,e)=>(0,g.A)({attr:t=>t.properties.area,domain:b,colors:"Bold"})(t,e),updateTriggers:{getFillColor:w},opacity:.8,getLineColor:[255,255,255,30],lineWidthMinPixels:2,pickable:!0,beforeId:"watername_ocean",parameters:{cullMode:"back",depthCompare:"always"}},k="h3"===n?new u.A({id:"h3-hexagons",data:j,getHexagon:t=>t.cell,...S}):new h.A({id:"a5-pentagons",data:B,getPolygon:t=>t.vertices,...S});let A=null;f&&(A="h3"===n?new u.A({id:"highlight-h3-hexagon",data:[f],filled:!0,stroked:!0,extruded:!1,getHexagon:t=>t.cell,getFillColor:[255,255,0,150],getLineColor:[255,255,0,255],lineWidthMinPixels:4,pickable:!1,beforeId:"watername_ocean",parameters:{cullMode:"back",depthCompare:"always"}}):new h.A({id:"highlight-a5-pentagon",data:[f],getPolygon:t=>t.vertices,getFillColor:[255,255,0,150],getLineColor:[255,255,0,255],lineWidthMinPixels:4,filled:!0,stroked:!0,pickable:!1,beforeId:"watername_ocean",parameters:{cullMode:"back",depthCompare:"always"}}));const C=A?[k,A]:[k];return(0,o.jsxs)("div",{style:{position:"absolute",height:"100%",width:"100%",top:0,left:0,background:"linear-gradient(0, #000, #223)"},children:[(0,o.jsx)(l.T5,{ref:m,projection:"globe",id:"map",initialViewState:{longitude:0,latitude:0,zoom:2,pitch:0,bearing:0},mapStyle:"https://basemaps.cartocdn.com/gl/dark-matter-gl-style/style.json",dragRotate:!1,maxPitch:0,children:(0,o.jsx)(R,{layers:C,interleaved:!0})}),(0,o.jsx)(M,{areaLimits:i,perimeterLimits:c,tilingSystem:n,onTilingSystemChange:t=>{r(t),x(null)}}),!e&&(0,o.jsx)(v,{tilingSystem:n,h3Output:j,a5Output:B,onCellHover:(t,e)=>{if(e){let e;if(x(t),"h3"===n)e=(0,p._k)(t.cell),e=[e[1],e[0]];else{const n=t.vertices,r=n.reduce(((t,e)=>t+e[0]),0),o=n.reduce(((t,e)=>t+e[1]),0);e=[r/n.length,o/n.length]}m.current&&m.current.flyTo({center:e,duration:1e3,essential:!0})}else x(null)}}),(0,o.jsx)(F,{areaLimits:i,h3AreaLimits:w})]})},$=C;function R(t){const e=(0,l.VI)((()=>new c.A(t))),{current:n}=(0,l.ko)();return(0,s.useEffect)((()=>{n&&n.flyTo({center:[-90,20],curve:.1,speed:.002})}),[n]),e.setProps(t),null}var T=n(5363),L=n(999);class z extends s.Component{static title="Area Variance";static code=(()=>`${a.l}/examples/website/area`)();static parameters={};static renderInfo(t){return(0,o.jsxs)("div",{children:[(0,o.jsx)("p",{children:"Area comparison between H3 and A5 tiling systems."}),(0,o.jsxs)("p",{children:["H3 cells vary in size across the globe, with the ratio between the largest and smallest cell areas being ",(0,o.jsx)("a",{href:"https://h3geo.org/docs/core-library/restable/#hexagon-min-and-max-areas",children:"roughly 2"}),"."]}),(0,o.jsx)("p",{children:"A5 cells area are more uniform, with the ratio between the largest and smallest cell areas being roughly 1.02."})]})}render(){return(0,o.jsx)("div",{style:{width:"100%",height:"100%",position:"absolute",background:"#111"},children:(0,o.jsx)(T.A,{children:()=>{const t=window.innerWidth<480||window.innerHeight<480;return(0,o.jsx)($,{...this.props,isMobile:t})}})})}}const q=(0,L.xv)(z),E={},W="Area Variance",Q={},N=[];function _(t){const e={h1:"h1",header:"header",...(0,i.R)(),...t.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(e.header,{children:(0,o.jsx)(e.h1,{id:"area-variance",children:"Area Variance"})}),"\n","\n",(0,o.jsx)(q,{})]})}function Y(t={}){const{wrapper:e}={...(0,i.R)(),...t.components};return e?(0,o.jsx)(e,{...t,children:(0,o.jsx)(_,{...t})}):_(t)}},8781:(t,e,n)=>{n.d(e,{$p:()=>u,Rb:()=>g,WP:()=>x,lN:()=>p,o4:()=>h,q8:()=>c,r5:()=>m,uB:()=>d});var r=n(7823),o=n(842),i=n(9699),s=n(1997);function a(t){return t*(Math.PI/180)}function l(t){return t*(180/Math.PI)}function c(t){return[o.Bw(t),Math.atan2(t[1],t[0])]}function u(t){let[e,n]=t;return[e*Math.cos(n),e*Math.sin(n)]}function h(t){return o.ZF(o.vt(),t,s.wc)}function p(t){const e=Math.atan2(t[1],t[0]),n=Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);return[e,Math.acos(t[2]/n)]}function d(t){let[e,n]=t;return[Math.sin(n)*Math.cos(e),Math.sin(n)*Math.sin(e),Math.cos(n)]}r.fG(Float64Array);const f=93;function g(t){let[e,n]=t;return[a(e+f),a(90-n)]}function x(t){let[e,n]=t;return[l(e)-f,90-l(n)]}function m(t){const e=d(t),n=i.vt();return i.Yc(n,[0,0,1],e),n}},9485:(t,e,n)=>{n.d(e,{g:()=>i});var r=n(1921),o=n(2189);function i(t){let e=[],n=1,i=0n;1===t?(n=12,i=0b10n<<56n):(n=60,i=0b01n<<56n);for(let s=0;s<n;s++){const n=BigInt(s)<<58n|i;if(t<o.To)e.push((0,r.u$)(n));else{const i=(0,o.xZ)(n,t);e=e.concat(i.map((t=>(0,r.u$)(t))))}}return e}}}]);